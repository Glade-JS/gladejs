var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return r(null==t&&n.path)}},n.exports),n.exports}function r(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var n="undefined"!=typeof window?window:e,i={NOOP:n.$W10NOOP=n.$W10NOOP||function(){}},s=Array.isArray;function o(e,t,r){for(var n=e,i=0;i<r;i++)n=n[t[i]];return n}function u(e){if("Date"===e.type)return new Date(e.value);if("NOOP"===e.type)return i.NOOP;throw new Error("Bad type")}var l=function(e){if(!e)return e;var t=e.$$;if(t){var r,n=e.o;if(t&&(r=t.length))for(var i=0;i<r;i++){var l,f=t[i],a=f.r;l=s(a)?o(n,a,a.length):u(a);var c=f.l,h=c.length-1;if(-1===h){n=e.o=l;break}o(n,c,h)[c[h]]=l}return t.length=0,null==n?null:n}return e},f=i,a=Array.prototype.slice;function c(e){return"function"==typeof e}function h(e){if(!c(e))throw TypeError("Invalid listener")}function _(e,t,r){switch(r.length){case 1:t.call(e);break;case 2:t.call(e,r[1]);break;case 3:t.call(e,r[1],r[2]);break;default:t.apply(e,a.call(r,1))}}function v(e,t,r,n){h(r);var i=e.$e||(e.$e={}),s=i[t];return s?c(s)?i[t]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r):i[t]=r,e}function $(){this.$e=this.$e||{}}$.EventEmitter=$,$.prototype={$e:null,emit:function(e){var t=arguments,r=this.$e;if(r){var n=r&&r[e];if(!n){if("error"===e){var i=t[1];if(!(i instanceof Error)){var s=i;(i=new Error("Error: "+s)).context=s}throw i}return!1}if(c(n))_(this,n,t);else for(var o=0,u=(n=a.call(n)).length;o<u;o++){var l=n[o];_(this,l,t)}return!0}},on:function(e,t){return v(this,e,t,!1)},prependListener:function(e,t){return v(this,e,t,!0)},once:function(e,t){return h(t),this.on(e,(function r(){this.removeListener(e,r),t&&(t.apply(this,arguments),t=null)})),this},removeListener:function(e,t){h(t);var r,n=this.$e;if(n&&(r=n[e]))if(c(r))r===t&&delete n[e];else for(var i=r.length-1;i>=0;i--)r[i]===t&&r.splice(i,1);return this},removeAllListeners:function(e){var t=this.$e;t&&delete t[e]},listenerCount:function(e){var t=this.$e,r=t&&t[e];return r?c(r)?1:r.length:0}};var p=$,g=t((function(e,t){var r="destroy";function n(e){return!e.once}function i(e){this.$__target=e,this.$__listeners=[],this.$__subscribeTo=null}function s(e){this.$__target=e}function o(){this.$__subscribeToList=[]}i.prototype={$__remove:function(e,t){var r=this.$__target,n=this.$__listeners;this.$__listeners=n.filter((function(n){var i=n[0],s=n[1],o=n[2];if(t){if(o&&e(i,o))return r.removeListener(i,o),!1}else if(e(i,s))return r.removeListener(i,o||s),!1;return!0}));var i=this.$__subscribeTo;if(!this.$__listeners.length&&i){var s=this,o=i.$__subscribeToList;i.$__subscribeToList=o.filter((function(e){return e!==s}))}},on:function(e,t){return this.$__target.on(e,t),this.$__listeners.push([e,t]),this},once:function(e,t){var r=this,n=function(){r.$__remove((function(e,t){return n===t}),!0),t.apply(this,arguments)};return this.$__target.once(e,n),this.$__listeners.push([e,t,n]),this},removeListener:function(e,t){return"function"==typeof e&&(t=e,e=null),t&&e?this.$__remove((function(r,n){return e===r&&t===n})):t?this.$__remove((function(e,r){return t===r})):e&&this.removeAllListeners(e),this},removeAllListeners:function(e){var t=this.$__listeners,r=this.$__target;if(e)this.$__remove((function(t,r){return e===t}));else{for(var n=t.length-1;n>=0;n--){var i=t[n];r.removeListener(i[0],i[1])}this.$__listeners.length=0}return this}},s.prototype={on:function(e,t){return this.$__target.addEventListener(e,t),this},once:function(e,t){var r=this,n=function(){r.$__target.removeEventListener(e,n),t()};return this.$__target.addEventListener(e,n),this},removeListener:function(e,t){return this.$__target.removeEventListener(e,t),this}},o.prototype={subscribeTo:function(e,t){for(var o,u,l=!t||!1!==t.addDestroyListener,f=this.$__subscribeToList,a=0,c=f.length;a<c;a++){var h=f[a];if(h.$__target===e){o=h;break}}return o||(n(e)&&(u=new s(e)),o=new i(u||e),l&&!u&&o.once(r,(function(){o.removeAllListeners();for(var t=f.length-1;t>=0;t--)if(f[t].$__target===e){f.splice(t,1);break}})),o.$__subscribeTo=this,f.push(o)),o},removeAllListeners:function(e,t){var r,n=this.$__subscribeToList;if(e)for(r=n.length-1;r>=0;r--){var i=n[r];if(i.$__target===e){i.removeAllListeners(t),i.$__listeners.length||n.splice(r,1);break}}else{for(r=n.length-1;r>=0;r--)n[r].removeAllListeners();n.length=0}}},(t=e.exports=o).wrap=function(e){var t,o;return n(e)&&(t=new s(e)),o=new i(t||e),t||e.once(r,(function(){o.$__listeners.length=0})),o},t.createTracker=function(){return new o}}));export{f as a,t as b,e as c,r as d,l as f,g as l,p as s};